<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UDP ‚Äî User Datagram Protocol</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,400;0,500;1,400&family=Outfit:wght@400;600;800;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f5f2eb;
    --surface: #ffffff;
    --surface2: #eee9de;
    --border: #d6cfc0;
    --accent: #e84545;
    --accent2: #f59e0b;
    --accent3: #2563eb;
    --accent4: #16a34a;
    --dark: #1a1a2e;
    --text: #1a1a2e;
    --muted: #7a7060;
    --mono: 'DM Mono', monospace;
    --sans: 'Outfit', sans-serif;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--sans);
    font-size: 18px;
    line-height: 1.7;
    overflow-x: hidden;
  }

  /* Subtle dot pattern */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: radial-gradient(circle, #c8bfaa 1px, transparent 1px);
    background-size: 28px 28px;
    opacity: 0.35;
    pointer-events: none;
    z-index: 0;
  }

  .container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 28px;
    position: relative;
    z-index: 1;
  }

  /* ======= HEADER ======= */
  header {
    padding: 80px 0 60px;
    position: relative;
  }

  .eyebrow {
    display: inline-block;
    font-family: var(--mono);
    font-size: 13px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--accent);
    border-bottom: 2px solid var(--accent);
    padding-bottom: 4px;
    margin-bottom: 20px;
    animation: fadeUp 0.5s ease both;
  }

  h1 {
    font-size: clamp(3rem, 8vw, 5.5rem);
    font-weight: 900;
    line-height: 1.0;
    letter-spacing: -2px;
    margin-bottom: 12px;
    animation: fadeUp 0.6s ease 0.1s both;
  }

  h1 .udp-word { color: var(--accent); }
  h1 .full-name { font-size: 0.38em; font-weight: 400; color: var(--muted); letter-spacing: 0; display: block; margin-top: 6px; }

  .hero-desc {
    font-family: var(--mono);
    font-size: 15px;
    color: var(--muted);
    max-width: 560px;
    margin-top: 18px;
    animation: fadeUp 0.6s ease 0.2s both;
    border-left: 3px solid var(--accent2);
    padding-left: 16px;
  }

  /* ======= SECTIONS ======= */
  section {
    margin-bottom: 90px;
  }

  .section-num {
    font-family: var(--mono);
    font-size: 12px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 6px;
  }

  h2 {
    font-size: 2.4rem;
    font-weight: 800;
    letter-spacing: -1px;
    margin-bottom: 18px;
    position: relative;
    display: inline-block;
  }

  h2::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 48px;
    height: 4px;
    background: var(--accent);
    border-radius: 2px;
  }

  p {
    font-family: var(--mono);
    font-size: 15px;
    color: #4a4535;
    line-height: 1.9;
    margin-bottom: 14px;
    max-width: 760px;
  }

  p strong { color: var(--text); font-weight: 500; }

  /* ======= CARDS ======= */
  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 18px;
    margin-top: 28px;
  }

  .card {
    background: var(--surface);
    border: 1.5px solid var(--border);
    border-radius: 14px;
    padding: 26px;
    position: relative;
    overflow: hidden;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 32px rgba(0,0,0,0.08);
  }

  .card-icon {
    font-size: 2rem;
    margin-bottom: 12px;
  }

  .card h3 {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 8px;
  }

  .card p {
    font-size: 13px;
    margin: 0;
    max-width: none;
  }

  .card-accent-bar {
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 4px;
    border-radius: 14px 14px 0 0;
  }

  /* ======= UDP vs TCP COMPARE ======= */
  .compare-table {
    width: 100%;
    border-collapse: collapse;
    font-family: var(--mono);
    font-size: 14px;
    margin-top: 28px;
    background: var(--surface);
    border-radius: 14px;
    overflow: hidden;
    border: 1.5px solid var(--border);
  }

  .compare-table thead th {
    padding: 16px 20px;
    text-align: left;
    font-size: 13px;
    letter-spacing: 2px;
    text-transform: uppercase;
    background: var(--dark);
    color: #fff;
  }

  .compare-table thead th:first-child { color: #fff; }
  .compare-table thead th:nth-child(2) { color: var(--accent); }
  .compare-table thead th:nth-child(3) { color: #60a5fa; }

  .compare-table td {
    padding: 14px 20px;
    border-bottom: 1px solid var(--border);
    vertical-align: top;
    color: #4a4535;
  }

  .compare-table tr:last-child td { border-bottom: none; }
  .compare-table tr:hover td { background: var(--surface2); }
  .compare-table td:first-child { font-weight: 600; color: var(--text); }
  .compare-table td:nth-child(2) { color: var(--accent); }
  .compare-table td:nth-child(3) { color: var(--accent3); }

  /* ======= SEGMENT STRUCTURE DIAGRAM ======= */
  .diagram-box {
    background: var(--dark);
    border-radius: 16px;
    padding: 36px 32px;
    margin: 32px 0;
    color: #e2e8f0;
    position: relative;
    overflow: hidden;
  }

  .diagram-box::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
    background-size: 30px 30px;
  }

  .diagram-label {
    font-family: var(--mono);
    font-size: 11px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: #64748b;
    margin-bottom: 24px;
    position: relative;
  }

  /* Segment structure */
  .seg-wrapper {
    position: relative;
    z-index: 1;
  }

  .seg-bit-ruler {
    display: flex;
    justify-content: space-between;
    font-family: var(--mono);
    font-size: 10px;
    color: #475569;
    margin-bottom: 6px;
    padding: 0 2px;
  }

  .seg-row {
    display: flex;
    border: 1.5px solid #2a3a5c;
    border-bottom: none;
    font-family: var(--mono);
  }

  .seg-row:last-child {
    border-bottom: 1.5px solid #2a3a5c;
  }

  .seg-field {
    flex: 1;
    padding: 14px 10px;
    text-align: center;
    font-size: 14px;
    font-weight: 500;
    border-right: 1.5px solid #2a3a5c;
    position: relative;
  }

  .seg-field:last-child { border-right: none; }

  .seg-field .field-bits {
    font-size: 9px;
    color: #475569;
    display: block;
    margin-bottom: 4px;
    letter-spacing: 1px;
  }

  .sf-srcport { background: rgba(232,69,69,0.15); color: #f87171; }
  .sf-dstport { background: rgba(245,158,11,0.15); color: #fbbf24; }
  .sf-length  { background: rgba(37,99,235,0.15); color: #60a5fa; }
  .sf-chksum  { background: rgba(22,163,74,0.15); color: #4ade80; }
  .sf-data    { background: rgba(168,85,247,0.15); color: #c084fc; min-height: 60px; }

  /* Callout labels */
  .field-callouts {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    margin-top: 28px;
    position: relative;
    z-index: 1;
  }

  .callout {
    background: rgba(255,255,255,0.04);
    border: 1px solid #2a3a5c;
    border-radius: 10px;
    padding: 14px 16px;
  }

  .callout-name {
    font-family: var(--mono);
    font-size: 13px;
    font-weight: 500;
    margin-bottom: 5px;
  }

  .callout-desc {
    font-family: var(--mono);
    font-size: 12px;
    color: #64748b;
    line-height: 1.7;
  }

  /* ======= CHECKSUM SECTION ======= */
  .checksum-steps {
    margin-top: 28px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .step {
    display: flex;
    gap: 20px;
    align-items: flex-start;
    background: var(--surface);
    border: 1.5px solid var(--border);
    border-radius: 14px;
    padding: 22px 24px;
    transition: box-shadow 0.2s ease;
  }

  .step:hover { box-shadow: 0 8px 24px rgba(0,0,0,0.07); }

  .step-num {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--dark);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--mono);
    font-size: 15px;
    font-weight: 700;
  }

  .step-body h4 {
    font-size: 1.05rem;
    font-weight: 700;
    margin-bottom: 6px;
  }

  .step-body p {
    font-size: 13px;
    margin: 0;
    max-width: none;
  }

  /* Checksum calculation visual */
  .calc-vis {
    background: var(--dark);
    border-radius: 14px;
    padding: 30px 28px;
    margin-top: 28px;
    font-family: var(--mono);
    position: relative;
    overflow: hidden;
  }

  .calc-vis::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
    background-size: 30px 30px;
  }

  .calc-title {
    font-size: 11px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: #475569;
    margin-bottom: 22px;
    position: relative;
  }

  .binary-row {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 12px;
    position: relative;
  }

  .bin-label {
    font-size: 12px;
    color: #64748b;
    width: 100px;
    flex-shrink: 0;
    text-align: right;
  }

  .bin-value {
    font-size: 15px;
    letter-spacing: 3px;
    font-weight: 500;
  }

  .bin-divider {
    border: none;
    border-top: 1.5px solid #2a3a5c;
    margin: 10px 0;
    position: relative;
  }

  .bin-divider::before {
    content: '+';
    position: absolute;
    left: 84px;
    top: -12px;
    color: #475569;
    font-size: 14px;
  }

  .bin-result {
    font-size: 15px;
    letter-spacing: 3px;
    font-weight: 700;
    color: #4ade80;
  }

  .bin-carry-note {
    font-size: 11px;
    color: #f59e0b;
    margin-left: 4px;
  }

  .complement-row {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: 18px;
    padding-top: 18px;
    border-top: 1px solid #2a3a5c;
    position: relative;
  }

  .comp-label {
    font-size: 12px;
    color: #64748b;
    width: 100px;
    flex-shrink: 0;
    text-align: right;
  }

  .comp-value {
    font-size: 15px;
    letter-spacing: 3px;
    color: #4ade80;
    font-weight: 700;
  }

  /* ======= USE CASES ======= */
  .use-case-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 14px;
    margin-top: 24px;
  }

  .use-case-item {
    background: var(--surface);
    border: 1.5px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    transition: all 0.2s ease;
  }

  .use-case-item:hover {
    background: var(--dark);
    color: white;
    border-color: var(--dark);
    transform: scale(1.03);
  }

  .use-case-item:hover p { color: #94a3b8; }

  .use-case-icon { font-size: 2.2rem; margin-bottom: 10px; }
  .use-case-item h4 { font-size: 1rem; font-weight: 700; margin-bottom: 6px; }
  .use-case-item p { font-size: 12px; margin: 0; }

  /* ======= SUMMARY BOX ======= */
  .summary-box {
    background: var(--dark);
    border-radius: 16px;
    padding: 36px 32px;
    color: #e2e8f0;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 20px;
    margin-top: 28px;
  }

  .summary-item {}
  .summary-item .s-label {
    font-family: var(--mono);
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #475569;
    margin-bottom: 6px;
  }
  .summary-item .s-val {
    font-family: var(--mono);
    font-size: 15px;
    font-weight: 500;
    color: #e2e8f0;
  }
  .summary-item .s-val.red { color: var(--accent); }
  .summary-item .s-val.yellow { color: #fbbf24; }
  .summary-item .s-val.green { color: #4ade80; }
  .summary-item .s-val.blue { color: #60a5fa; }

  /* ANIMATIONS */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .reveal {
    opacity: 0;
    transform: translateY(24px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }
  .reveal.visible { opacity: 1; transform: none; }

  footer {
    border-top: 1.5px solid var(--border);
    padding: 36px 0;
    text-align: center;
    font-family: var(--mono);
    font-size: 13px;
    color: var(--muted);
    margin-top: 40px;
  }

  @media (max-width: 600px) {
    .field-callouts { grid-template-columns: 1fr; }
  }

  /* ======= SIMULATION STYLES ======= */
  .sim-container { background: var(--dark); border-radius: 18px; padding: 36px 32px; margin-top: 28px; position: relative; overflow: hidden; color: #e2e8f0; }
  .sim-container::before { content: ""; position: absolute; inset: 0; background-image: linear-gradient(rgba(255,255,255,0.015) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.015) 1px, transparent 1px); background-size: 30px 30px; pointer-events: none; }
  .sim-tabs { display: flex; gap: 8px; margin-bottom: 28px; flex-wrap: wrap; position: relative; z-index: 1; }
  .sim-tab { font-family: var(--mono); font-size: 12px; letter-spacing: 1px; padding: 8px 18px; border-radius: 8px; border: 1.5px solid #2a3a5c; background: transparent; color: #64748b; cursor: pointer; transition: all 0.2s ease; }
  .sim-tab:hover { border-color: #475569; color: #94a3b8; }
  .sim-tab.active { background: var(--accent); border-color: var(--accent); color: white; }
  .sim-panel { display: none; position: relative; z-index: 1; }
  .sim-panel.active { display: block; }
  .sim-arena { background: #0d1424; border: 1.5px solid #1e2d45; border-radius: 12px; padding: 24px; position: relative; overflow: hidden; }
  .sim-nodes { display: flex; justify-content: space-between; align-items: center; gap: 12px; }
  .sim-node { background: #111827; border: 2px solid #2a3a5c; border-radius: 12px; padding: 14px 18px; text-align: center; font-family: var(--mono); min-width: 110px; flex-shrink: 0; }
  .sim-node .node-icon { font-size: 1.8rem; margin-bottom: 4px; }
  .sim-node .node-name { font-size: 13px; font-weight: 600; }
  .sim-node .node-ip { font-size: 10px; color: #475569; margin-top: 2px; }
  .sim-channel { flex: 1; position: relative; height: 60px; display: flex; align-items: center; }
  .sim-channel-line { width: 100%; height: 2px; background: linear-gradient(90deg, #1e2d45, #2a3a5c, #1e2d45); position: relative; }
  .sim-packet { position: absolute; top: 50%; transform: translateY(-50%); width: 40px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-family: var(--mono); font-size: 9px; font-weight: 700; opacity: 0; left: 0; pointer-events: none; z-index: 10; }
  .sim-packet.traveling { animation: travelPacket 1.8s ease-in-out forwards; }
  .sim-packet.dropped { animation: travelDrop 1.8s ease-in-out forwards; }
  @keyframes travelPacket { 0% { left: 0%; opacity: 1; } 100% { left: calc(100% - 40px); opacity: 1; } }
  @keyframes travelDrop { 0% { left: 0%; opacity: 1; transform: translateY(-50%) rotate(0deg); } 58% { left: 54%; opacity: 1; transform: translateY(-50%) rotate(0deg); } 80% { left: 59%; opacity: 0.4; transform: translateY(14px) rotate(20deg); } 100% { left: 61%; opacity: 0; transform: translateY(34px) rotate(35deg); } }
  .sim-controls { display: flex; gap: 10px; margin-top: 18px; flex-wrap: wrap; align-items: center; }
  .sim-btn { font-family: var(--mono); font-size: 12px; padding: 10px 18px; border-radius: 8px; border: 1.5px solid; cursor: pointer; font-weight: 600; transition: all 0.15s ease; }
  .sim-btn:hover { opacity: 0.85; transform: translateY(-1px); }
  .sim-btn:active { transform: translateY(0); }
  .btn-send { background: var(--accent4); border-color: var(--accent4); color: white; }
  .btn-drop { background: transparent; border-color: #f59e0b; color: #f59e0b; }
  .btn-burst { background: transparent; border-color: #60a5fa; color: #60a5fa; }
  .btn-reset { background: transparent; border-color: #475569; color: #64748b; }
  .sim-log { background: #060d1a; border: 1px solid #1e2d45; border-radius: 10px; padding: 14px 16px; margin-top: 16px; font-family: var(--mono); font-size: 12px; max-height: 150px; overflow-y: auto; line-height: 2; }
  .log-time { color: #334155; margin-right: 8px; }
  .log-sent { color: #4ade80; }
  .log-drop { color: #f87171; }
  .log-recv { color: #60a5fa; }
  .log-info { color: #94a3b8; }
  .sim-stats { display: flex; gap: 10px; margin-top: 14px; flex-wrap: wrap; }
  .stat-pill { background: #111827; border: 1px solid #1e2d45; border-radius: 8px; padding: 8px 16px; font-family: var(--mono); font-size: 12px; }
  .stat-pill span { font-size: 16px; font-weight: 700; display: block; margin-bottom: 1px; }
  .chk-sim { background: #0d1424; border: 1.5px solid #1e2d45; border-radius: 12px; padding: 24px; }
  .chk-input-row { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 18px; }
  .chk-field { flex: 1; min-width: 140px; }
  .chk-field label { display: block; font-family: var(--mono); font-size: 11px; letter-spacing: 2px; text-transform: uppercase; color: #475569; margin-bottom: 5px; }
  .chk-field input { width: 100%; background: #111827; border: 1.5px solid #2a3a5c; border-radius: 8px; padding: 10px 14px; font-family: var(--mono); font-size: 13px; color: #e2e8f0; outline: none; transition: border-color 0.2s; }
  .chk-field input:focus { border-color: var(--accent); }
  .chk-result-area { background: #060d1a; border: 1px solid #1e2d45; border-radius: 10px; padding: 18px; font-family: var(--mono); font-size: 13px; min-height: 80px; }
  .chk-step-row { display: flex; align-items: center; gap: 10px; padding: 5px 0; border-bottom: 1px solid #0d1424; animation: fadeIn 0.25s ease; }
  .chk-step-row:last-child { border-bottom: none; }
  .chk-step-label { color: #475569; width: 120px; flex-shrink: 0; font-size: 11px; }
  .chk-step-bin { color: #94a3b8; letter-spacing: 3px; font-size: 12px; flex: 1; }
  .chk-step-hex { color: #64748b; font-size: 11px; width: 64px; text-align: right; }
  .chk-final { color: #4ade80; font-weight: 700; font-size: 14px; }
  .chk-verify-ok { color: #4ade80; }
  .chk-verify-fail { color: #f87171; }
  .seg-builder { background: #0d1424; border: 1.5px solid #1e2d45; border-radius: 12px; padding: 24px; }
  .sb-form { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
  .sb-field label { display: block; font-family: var(--mono); font-size: 11px; letter-spacing: 2px; text-transform: uppercase; color: #475569; margin-bottom: 5px; }
  .sb-field input, .sb-field textarea { width: 100%; background: #111827; border: 1.5px solid #2a3a5c; border-radius: 8px; padding: 10px 14px; font-family: var(--mono); font-size: 13px; color: #e2e8f0; outline: none; resize: none; transition: border-color 0.2s; }
  .sb-field input:focus, .sb-field textarea:focus { border-color: #60a5fa; }
  .sb-full { grid-column: 1 / -1; }
  .sb-segment-vis { border: 1.5px solid #2a3a5c; border-radius: 10px; overflow: hidden; font-family: var(--mono); font-size: 13px; }
  .sb-seg-row { display: flex; border-bottom: 1.5px solid #2a3a5c; }
  .sb-seg-row:last-child { border-bottom: none; }
  .sb-seg-cell { flex: 1; padding: 12px 14px; text-align: center; border-right: 1.5px solid #2a3a5c; }
  .sb-seg-cell:last-child { border-right: none; }
  .sb-seg-cell .sc-label { font-size: 10px; letter-spacing: 1px; text-transform: uppercase; color: #475569; margin-bottom: 4px; }
  .sb-seg-cell .sc-val { font-size: 14px; font-weight: 600; }
  .sb-data-cell { width: 100%; padding: 12px 14px; font-size: 13px; color: #c084fc; word-break: break-all; min-height: 48px; background: rgba(168,85,247,0.07); }
  .sb-data-cell .sc-label { color: #7c3aed; font-size: 10px; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 4px; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

</style>
</head>
<body>

<div class="container">

  <!-- HEADER -->
  <header>
    <div class="eyebrow">Computer Networks ¬∑ Transport Layer</div>
    <h1>
      <span class="udp-word">UDP</span>
      <span class="full-name">User Datagram Protocol</span>
    </h1>
    <p class="hero-desc">A lightweight, connectionless transport protocol ‚Äî fast, simple, and efficient. It sends data without handshakes, error recovery, or ordering guarantees.</p>
  </header>

  <!-- SECTION 1: INTRODUCTION -->
  <section class="reveal">
    <div class="section-num">// 01 ‚Äî Introduction</div>
    <h2>What is UDP?</h2>

    <p>UDP is one of the two core transport layer protocols (alongside TCP). Defined in <strong>RFC 768</strong>, it provides a minimal service for delivering data between applications ‚Äî just the bare essentials.</p>

    <p>If TCP is like a <strong>registered letter</strong> (tracked, confirmed, reliable), then UDP is like a <strong>postcard</strong> ‚Äî you drop it in the mailbox and hope it arrives. No acknowledgement, no retransmission, no guarantee of order.</p>

    <p>That simplicity is its superpower. UDP adds almost <strong>zero overhead</strong> to IP, making it the go-to choice when speed matters more than reliability.</p>

    <div class="card-grid" style="margin-top:32px;">
      <div class="card">
        <div class="card-accent-bar" style="background: var(--accent);"></div>
        <div class="card-icon">‚ö°</div>
        <h3>Connectionless</h3>
        <p>No handshake needed. Data is sent immediately without establishing a connection ‚Äî eliminating setup delay.</p>
      </div>
      <div class="card">
        <div class="card-accent-bar" style="background: var(--accent2);"></div>
        <div class="card-icon">ü™∂</div>
        <h3>Lightweight Header</h3>
        <p>Only 8 bytes of header overhead per segment ‚Äî compared to TCP's 20+ bytes. Less baggage, more speed.</p>
      </div>
      <div class="card">
        <div class="card-accent-bar" style="background: var(--accent3);"></div>
        <div class="card-icon">üö´</div>
        <h3>No Reliability</h3>
        <p>Segments may be lost, duplicated, or arrive out of order. UDP does not retransmit or reorder ‚Äî the app must handle this if needed.</p>
      </div>
      <div class="card">
        <div class="card-accent-bar" style="background: var(--accent4);"></div>
        <div class="card-icon">üéõÔ∏è</div>
        <h3>App-Level Control</h3>
        <p>Applications get fine-grained control over what is sent and when ‚Äî useful for real-time systems that can't afford delays.</p>
      </div>
    </div>

    <!-- UDP vs TCP Table -->
    <h3 style="margin-top:44px; font-size:1.4rem; font-weight:700; margin-bottom:4px;">UDP vs TCP at a Glance</h3>
    <table class="compare-table">
      <thead>
        <tr>
          <th>Feature</th>
          <th>UDP</th>
          <th>TCP</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>Connection</td><td>Connectionless</td><td>Connection-oriented (3-way handshake)</td></tr>
        <tr><td>Reliability</td><td>No guarantees</td><td>Guaranteed delivery</td></tr>
        <tr><td>Order</td><td>Not preserved</td><td>In-order delivery</td></tr>
        <tr><td>Speed</td><td>Faster</td><td>Slower (overhead)</td></tr>
        <tr><td>Header Size</td><td>8 bytes</td><td>20‚Äì60 bytes</td></tr>
        <tr><td>Flow Control</td><td>None</td><td>Yes</td></tr>
        <tr><td>Use Cases</td><td>DNS, streaming, gaming, VoIP</td><td>HTTP, email, file transfer</td></tr>
      </tbody>
    </table>
  </section>

  <!-- SECTION 2: SEGMENT STRUCTURE -->
  <section class="reveal">
    <div class="section-num">// 02 ‚Äî Segment Structure</div>
    <h2>UDP Segment Structure</h2>

    <p>A UDP segment is elegantly simple ‚Äî just a <strong>fixed 8-byte header</strong> followed by the application data. No options, no variable-length fields.</p>

    <div class="diagram-box">
      <div class="diagram-label">// UDP Segment Format ‚Äî 32-bit words</div>

      <div class="seg-wrapper">
        <!-- Bit ruler -->
        <div class="seg-bit-ruler">
          <span>Bit 0</span>
          <span>7</span>
          <span>15</span>
          <span>16</span>
          <span>23</span>
          <span>Bit 31</span>
        </div>

        <!-- Row 1: Source Port + Dest Port -->
        <div class="seg-row">
          <div class="seg-field sf-srcport">
            <span class="field-bits">bits 0‚Äì15</span>
            Source Port
          </div>
          <div class="seg-field sf-dstport">
            <span class="field-bits">bits 16‚Äì31</span>
            Destination Port
          </div>
        </div>

        <!-- Row 2: Length + Checksum -->
        <div class="seg-row">
          <div class="seg-field sf-length">
            <span class="field-bits">bits 0‚Äì15</span>
            Length
          </div>
          <div class="seg-field sf-chksum">
            <span class="field-bits">bits 16‚Äì31</span>
            Checksum
          </div>
        </div>

        <!-- Row 3: Data -->
        <div class="seg-row">
          <div class="seg-field sf-data" style="flex:1; padding: 18px;">
            <span class="field-bits">variable length</span>
            Application Data (Payload)
          </div>
        </div>

        <!-- Brace labels -->
        <div style="display:flex; justify-content:space-between; margin-top:10px; font-family:var(--mono); font-size:11px; color:#475569; position:relative; z-index:1;">
          <span>‚Üê 8 bytes fixed header ‚Üí</span>
          <span>‚Üê variable length data ‚Üí</span>
        </div>

        <!-- Field Callouts -->
        <div class="field-callouts">
          <div class="callout">
            <div class="callout-name" style="color:#f87171;">üìå Source Port (16 bits)</div>
            <div class="callout-desc">Port number of the sending application. Optional ‚Äî set to 0 if the sender doesn't need a reply. Range: 0‚Äì65535.</div>
          </div>
          <div class="callout">
            <div class="callout-name" style="color:#fbbf24;">üìå Destination Port (16 bits)</div>
            <div class="callout-desc">Port number of the receiving application. Used by the receiver to demultiplex data to the correct socket.</div>
          </div>
          <div class="callout">
            <div class="callout-name" style="color:#60a5fa;">üìå Length (16 bits)</div>
            <div class="callout-desc">Total length of the UDP segment in bytes ‚Äî including header (8 bytes) + data. Minimum value: 8 (empty payload). Maximum: 65,535 bytes.</div>
          </div>
          <div class="callout">
            <div class="callout-name" style="color:#4ade80;">üìå Checksum (16 bits)</div>
            <div class="callout-desc">Error detection field. Computed over a pseudo-header + UDP header + data. Set to 0 if not used (optional in IPv4, mandatory in IPv6).</div>
          </div>
        </div>
      </div>
    </div>

    <p>The total size of a UDP segment is: <strong>Header (8 bytes) + Payload (up to 65,527 bytes)</strong>. In practice, payloads are kept much smaller to avoid IP fragmentation.</p>
  </section>

  <!-- SECTION 3: CHECKSUM -->
  <section class="reveal">
    <div class="section-num">// 03 ‚Äî UDP Checksum</div>
    <h2>UDP Checksum</h2>

    <p>The checksum is UDP's only error detection mechanism. It allows the receiver to detect if a segment was corrupted in transit. It uses <strong>1's complement arithmetic</strong> ‚Äî a simple but effective technique.</p>

    <!-- Steps -->
    <div class="checksum-steps">
      <div class="step">
        <div class="step-num" style="background:var(--accent);">1</div>
        <div class="step-body">
          <h4>Divide data into 16-bit words</h4>
          <p>The sender treats the entire UDP segment (including a pseudo-header from IP, UDP header, and data) as a sequence of 16-bit (2-byte) words.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-num" style="background:var(--accent2); color:var(--dark);">2</div>
        <div class="step-body">
          <h4>Sum all 16-bit words using 1's complement addition</h4>
          <p>Add all 16-bit words together. If there is a carry out of the most significant bit, it is wrapped around and added back to the result (end-around carry).</p>
        </div>
      </div>
      <div class="step">
        <div class="step-num" style="background:var(--accent3);">3</div>
        <div class="step-body">
          <h4>Take the 1's complement of the sum</h4>
          <p>Flip all bits of the final sum (0‚Üí1, 1‚Üí0). This becomes the checksum, which is placed in the UDP header's checksum field before sending.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-num" style="background:var(--accent4);">4</div>
        <div class="step-body">
          <h4>Receiver verifies: sum should equal all 1s</h4>
          <p>The receiver sums all 16-bit words of the received segment <em>including</em> the checksum field. If no error occurred, the result should be <strong>1111 1111 1111 1111</strong> (0xFFFF). Any other result means corruption was detected.</p>
        </div>
      </div>
    </div>

    <!-- Worked Example -->
    <div class="calc-vis">
      <div class="calc-title">// Worked Example ‚Äî Sender Computing Checksum</div>

      <div style="position:relative; z-index:1;">
        <div class="binary-row">
          <span class="bin-label">Word 1</span>
          <span class="bin-value" style="color:#f87171;">0110 0110 0110 0000</span>
          <span style="font-family:var(--mono); font-size:12px; color:#475569; margin-left:8px;">= 0x6660</span>
        </div>
        <div class="binary-row">
          <span class="bin-label">Word 2</span>
          <span class="bin-value" style="color:#fbbf24;">0101 0101 0101 0101</span>
          <span style="font-family:var(--mono); font-size:12px; color:#475569; margin-left:8px;">= 0x5555</span>
        </div>
        <hr class="bin-divider">
        <div class="binary-row" style="margin-top:6px;">
          <span class="bin-label" style="color:#64748b;">Sum</span>
          <span class="bin-value" style="color:#94a3b8;">1011 1011 1011 0101</span>
          <span style="font-family:var(--mono); font-size:12px; color:#475569; margin-left:8px;">= 0xBBB5</span>
        </div>
        <div class="binary-row" style="margin-top:8px;">
          <span class="bin-label">Word 3</span>
          <span class="bin-value" style="color:#60a5fa;">1111 0000 1111 0000</span>
          <span style="font-family:var(--mono); font-size:12px; color:#475569; margin-left:8px;">= 0xF0F0</span>
        </div>
        <hr class="bin-divider" style="margin-top:10px;">
        <div class="binary-row" style="margin-top:6px;">
          <span class="bin-label" style="color:#64748b;">Sum</span>
          <span class="bin-value" style="color:#94a3b8;">1010 1100 1010 0101</span>
          <span class="bin-carry-note">‚Üê carry out: add 1 ‚Üí 1010 1100 1010 0110</span>
        </div>

        <div class="complement-row">
          <span class="comp-label">1's Complement<br>(flip bits)</span>
          <span class="comp-value">0101 0011 0101 1001</span>
          <span style="font-family:var(--mono); font-size:13px; color:#4ade80; margin-left:16px; font-weight:600;">‚Üê This is the Checksum!</span>
        </div>

        <div style="margin-top:22px; padding:16px; background:rgba(34,197,94,0.07); border:1px solid rgba(34,197,94,0.2); border-radius:8px;">
          <p style="color:#4ade80; font-size:13px; margin:0;">
            ‚úÖ At the <strong style="color:#4ade80;">receiver</strong>: all words including the checksum are summed. If no corruption occurred, the result = <strong style="color:#4ade80;">1111 1111 1111 1111</strong> (all ones). Otherwise, an error has been detected.
          </p>
        </div>
      </div>
    </div>


    <!-- RECEIVER CHECKSUM SECTION -->
    <div style="margin-top:40px;">
      <h3 style="font-size:1.5rem; font-weight:800; margin-bottom:6px; letter-spacing:-0.5px;">Receiver Side: Checksum Verification</h3>
      <p style="font-family:var(--mono); font-size:15px; color:#4a4535; line-height:1.9; margin-bottom:20px; max-width:760px;">
        When the receiver gets the UDP segment, it performs its own checksum calculation. It adds <strong>all 16-bit words including the received checksum field</strong> itself. If no corruption occurred in transit, the final sum will always equal <strong style="color:var(--accent4);">1111 1111 1111 1111 (0xFFFF)</strong> ‚Äî all ones. This is the mathematical guarantee of 1's complement arithmetic.
      </p>

      <!-- Receiver Steps -->
      <div class="checksum-steps">
        <div class="step">
          <div class="step-num" style="background:var(--accent4);">1</div>
          <div class="step-body">
            <h4>Receive the segment</h4>
            <p>The receiver gets the UDP segment containing: all original data words <strong>and</strong> the checksum field that the sender placed in the header. No field is stripped out.</p>
          </div>
        </div>
        <div class="step">
          <div class="step-num" style="background:var(--accent3);">2</div>
          <div class="step-body">
            <h4>Sum ALL 16-bit words ‚Äî including the checksum</h4>
            <p>The receiver applies the exact same 1's complement addition to all words: the data words <em>plus</em> the checksum word. Carry bits are wrapped around (end-around carry), just like the sender did.</p>
          </div>
        </div>
        <div class="step">
          <div class="step-num" style="background:var(--accent2); color:var(--dark);">3</div>
          <div class="step-body">
            <h4>Check the result</h4>
            <p>
              <strong style="color:var(--accent4);">Result = 1111 1111 1111 1111 (0xFFFF)?</strong> ‚Üí No errors detected. Segment is accepted and passed to the application.<br>
              <strong style="color:var(--accent);">Result ‚â† 0xFFFF?</strong> ‚Üí Corruption detected. The segment is <strong>silently discarded</strong>. UDP does not send an error reply or request retransmission ‚Äî that is left to the application layer.
            </p>
          </div>
        </div>
      </div>

      <!-- Receiver Worked Example -->
      <div class="calc-vis" style="margin-top:28px;">
        <div class="calc-title">// Worked Example ‚Äî Receiver Verifying Checksum</div>

        <div style="position:relative; z-index:1;">

          <div style="font-family:var(--mono); font-size:11px; color:#475569; margin-bottom:14px; padding:8px 12px; background:rgba(255,255,255,0.04); border-radius:6px; border-left:3px solid #475569;">
            Using the same values from the sender example above. Receiver has: Word 1 = 0x6660, Word 2 = 0x5555, Word 3 = 0xF0F0, Checksum = 0x5359
          </div>

          <!-- Step 1: Add word 1 + word 2 -->
          <div class="binary-row">
            <span class="bin-label">Word 1</span>
            <span class="bin-value" style="color:#f87171;">0110 0110 0110 0000</span>
            <span style="font-family:var(--mono); font-size:12px; color:#475569; margin-left:8px;">= 0x6660</span>
          </div>
          <div class="binary-row">
            <span class="bin-label">Word 2</span>
            <span class="bin-value" style="color:#fbbf24;">0101 0101 0101 0101</span>
            <span style="font-family:var(--mono); font-size:12px; color:#475569; margin-left:8px;">= 0x5555</span>
          </div>
          <hr class="bin-divider">
          <div class="binary-row" style="margin-top:6px;">
            <span class="bin-label" style="color:#64748b;">Sum</span>
            <span class="bin-value" style="color:#94a3b8;">1011 1011 1011 0101</span>
            <span style="font-family:var(--mono); font-size:12px; color:#475569; margin-left:8px;">= 0xBBB5</span>
          </div>

          <!-- Step 2: Add word 3 -->
          <div class="binary-row" style="margin-top:8px;">
            <span class="bin-label">Word 3</span>
            <span class="bin-value" style="color:#60a5fa;">1111 0000 1111 0000</span>
            <span style="font-family:var(--mono); font-size:12px; color:#475569; margin-left:8px;">= 0xF0F0</span>
          </div>
          <hr class="bin-divider" style="margin-top:10px;">
          <div class="binary-row" style="margin-top:6px;">
            <span class="bin-label" style="color:#64748b;">Sum</span>
            <span class="bin-value" style="color:#94a3b8;">1010 1100 1010 0101</span>
            <span class="bin-carry-note">‚Üê carry out: add 1 ‚Üí 1010 1100 1010 0110</span>
          </div>

          <!-- Step 3: Add the checksum field -->
          <div class="binary-row" style="margin-top:8px;">
            <span class="bin-label" style="color:#4ade80;">+ Checksum</span>
            <span class="bin-value" style="color:#4ade80;">0101 0011 0101 1001</span>
            <span style="font-family:var(--mono); font-size:12px; color:#475569; margin-left:8px;">= 0x5359 (received checksum)</span>
          </div>
          <hr class="bin-divider" style="margin-top:10px;">

          <!-- Final result -->
          <div style="margin-top:10px; display:flex; align-items:center; gap:16px; flex-wrap:wrap;">
            <span class="bin-label" style="color:#4ade80; font-weight:700;">Final Sum</span>
            <span style="font-family:var(--mono); font-size:16px; font-weight:700; color:#4ade80; letter-spacing:3px;">1111 1111 1111 1111</span>
            <span style="font-family:var(--mono); font-size:13px; color:#4ade80; font-weight:600;">= 0xFFFF ‚úì</span>
          </div>

          <!-- Result verdict -->
          <div style="margin-top:22px; padding:18px; background:rgba(34,197,94,0.08); border:1px solid rgba(34,197,94,0.3); border-radius:10px;">
            <div style="font-family:var(--mono); font-size:13px; color:#4ade80; font-weight:700; margin-bottom:8px;">‚úÖ Result = 0xFFFF ‚Äî No corruption detected!</div>
            <p style="color:#4ade80; font-size:13px; margin:0; opacity:0.85;">
              All 16-bit words (including the checksum) sum to all 1s. The segment is accepted and delivered to the application layer.
            </p>
          </div>

          <!-- Error scenario -->
          <div style="margin-top:16px; padding:18px; background:rgba(239,68,68,0.07); border:1px solid rgba(239,68,68,0.25); border-radius:10px;">
            <div style="font-family:var(--mono); font-size:13px; color:#f87171; font-weight:700; margin-bottom:8px;">‚ùå What if corruption occurs?</div>
            <p style="color:#f87171; font-size:13px; margin:0 0 8px; opacity:0.9;">
              Suppose bit-flip changes Word 1 from <code style="background:rgba(255,255,255,0.07); padding:1px 5px; border-radius:3px;">0x6660</code> to <code style="background:rgba(255,255,255,0.07); padding:1px 5px; border-radius:3px;">0x6661</code> during transmission.
            </p>
            <div style="font-family:var(--mono); font-size:13px; color:#94a3b8;">
              New sum = 0xFFFF + 0x0001 = <span style="color:#f87171; font-weight:700;">0x0000</span> ‚Üê <strong style="color:#f87171;">Not 0xFFFF ‚Üí Corruption detected! Segment silently discarded.</strong>
            </div>
          </div>
        </div>
      </div>

      <!-- Why 1s complement? -->
      <div style="margin-top:28px; background:var(--surface); border:1.5px solid var(--border); border-radius:14px; padding:26px;">
        <h4 style="font-size:1.1rem; font-weight:800; margin-bottom:14px;">üí° Why Does This Work? The Math Behind It</h4>
        <p style="font-family:var(--mono); font-size:14px; color:#4a4535; line-height:1.9; margin-bottom:10px; max-width:none;">
          In 1's complement arithmetic: <strong>a number + its complement = all 1s</strong>. The sender computes the checksum as the complement of the sum of all data words. So when the receiver adds those same data words to the checksum, it gets back all 1s ‚Äî 0xFFFF.
        </p>
        <div style="background:var(--surface2); border-radius:8px; padding:16px 20px; font-family:var(--mono); font-size:13px; line-height:2;">
          <div><span style="color:var(--muted);">Sender:</span>  checksum = ~(Word1 + Word2 + Word3)  =  ~(Sum)</div>
          <div><span style="color:var(--muted);">Receiver:</span> Word1 + Word2 + Word3 + checksum  =  Sum + ~Sum  =  <span style="color:var(--accent4); font-weight:700;">0xFFFF</span></div>
        </div>
        <p style="font-family:var(--mono); font-size:13px; color:var(--muted); margin-top:12px; max-width:none;">
          This is a purely hardware-friendly check ‚Äî no division, no polynomial ‚Äî just addition and bit flipping. Fast to compute, fast to verify.
        </p>
      </div>

      <!-- Limitations note -->
      <div style="margin-top:18px; padding:16px 20px; background:rgba(245,158,11,0.07); border:1px solid rgba(245,158,11,0.25); border-radius:10px;">
        <p style="font-family:var(--mono); font-size:13px; color:#d97706; margin:0; line-height:1.9;">
          ‚ö† <strong>Limitations:</strong> The UDP checksum can miss certain error patterns. For example, if two words each have a 1-bit error that cancel each other out in the sum, no error is detected. For stronger guarantees, applications use CRC (used in Ethernet) or cryptographic hashes.
        </p>
      </div>
    </div>

    <p style="margin-top:20px;"><strong>Important:</strong> UDP checksum only <em>detects</em> errors ‚Äî it does not correct them. If a segment fails the checksum, it is silently discarded. Error recovery is left to the application layer.</p>

    <p>The checksum also covers a <strong>pseudo-header</strong> (borrowed from the IP layer) including source IP, destination IP, protocol number, and UDP length ‚Äî to catch misdirected packets.</p>
  </section>

  <!-- SECTION 4: USE CASES -->
  <section class="reveal">
    <div class="section-num">// 04 ‚Äî Applications</div>
    <h2>Where UDP is Used</h2>
    <p>UDP shines when <strong>low latency</strong> matters more than perfect reliability. Many real-time applications tolerate occasional packet loss but cannot tolerate the delay of retransmission.</p>

    <div class="use-case-list">
      <div class="use-case-item">
        <div class="use-case-icon">üåê</div>
        <h4>DNS</h4>
        <p>Fast single-packet queries and responses. Retries handled at app level.</p>
      </div>
      <div class="use-case-item">
        <div class="use-case-icon">üì∫</div>
        <h4>Video Streaming</h4>
        <p>Occasional dropped frames are acceptable. Stalling to retransmit is not.</p>
      </div>
      <div class="use-case-item">
        <div class="use-case-icon">üìû</div>
        <h4>VoIP</h4>
        <p>Real-time voice calls need low latency. A lost packet just means brief static.</p>
      </div>
      <div class="use-case-item">
        <div class="use-case-icon">üéÆ</div>
        <h4>Online Gaming</h4>
        <p>Game state updates must be fast. Old packets are irrelevant anyway.</p>
      </div>
      <div class="use-case-item">
        <div class="use-case-icon">üì°</div>
        <h4>DHCP / TFTP</h4>
        <p>Bootstrap protocols that run before TCP/IP is configured.</p>
      </div>
      <div class="use-case-item">
        <div class="use-case-icon">üìª</div>
        <h4>Live Broadcast</h4>
        <p>Radio, IPTV ‚Äî continuous stream where timeliness beats completeness.</p>
      </div>
    </div>
  </section>

  <!-- SUMMARY -->
  <section class="reveal">
    <div class="section-num">// 05 ‚Äî Summary</div>
    <h2>Quick Reference</h2>

    <div class="summary-box">
      <div class="summary-item">
        <div class="s-label">Protocol</div>
        <div class="s-val red">UDP / RFC 768</div>
      </div>
      <div class="summary-item">
        <div class="s-label">Header Size</div>
        <div class="s-val yellow">8 bytes (fixed)</div>
      </div>
      <div class="summary-item">
        <div class="s-label">Header Fields</div>
        <div class="s-val blue">Src Port, Dst Port,<br>Length, Checksum</div>
      </div>
      <div class="summary-item">
        <div class="s-label">Connection</div>
        <div class="s-val red">Connectionless</div>
      </div>
      <div class="summary-item">
        <div class="s-label">Reliability</div>
        <div class="s-val red">Best-effort only</div>
      </div>
      <div class="summary-item">
        <div class="s-label">Error Detection</div>
        <div class="s-val green">Checksum (optional IPv4,<br>mandatory IPv6)</div>
      </div>
      <div class="summary-item">
        <div class="s-label">Checksum Method</div>
        <div class="s-val yellow">1's Complement Sum</div>
      </div>
      <div class="summary-item">
        <div class="s-label">Best For</div>
        <div class="s-val green">Speed-critical, real-time<br>applications</div>
      </div>
    </div>
  </section>

  <!-- SECTION 6: SIMULATION -->
  <section class="reveal">
    <div class="section-num">// 06 ‚Äî Interactive Simulation</div>
    <h2>Live Simulations</h2>
    <p>Explore how UDP works in practice. Try sending packets, simulating drops, building segments, and computing checksums step by step.</p>

    <div class="sim-container">
      <!-- Tabs -->
      <div class="sim-tabs">
        <button class="sim-tab active" onclick="switchTab('pkt')">üì° Packet Transmission</button>
        <button class="sim-tab" onclick="switchTab('seg')">üß© Segment Builder</button>
        <button class="sim-tab" onclick="switchTab('chk')">üî¢ Checksum Calculator</button>
      </div>

      <!-- ===== TAB 1: Packet Transmission ===== -->
      <div class="sim-panel active" id="tab-pkt">
        <p style="font-size:13px; color:#64748b; margin-bottom:16px;">Simulate UDP packet transmission. Notice: packets may be dropped ‚Äî UDP provides no guarantee of delivery or retransmission.</p>
        <div class="sim-arena">
          <div class="sim-nodes">
            <div class="sim-node" id="sender-node">
              <div class="node-icon">üíª</div>
              <div class="node-name" style="color:#4ade80;">Sender</div>
              <div class="node-ip">192.168.1.10</div>
              <div class="node-ip" style="color:#f87171; margin-top:4px;" id="sent-count">Sent: 0</div>
            </div>
            <div class="sim-channel" id="sim-channel">
              <div class="sim-channel-line" id="channel-line"></div>
            </div>
            <div class="sim-node" id="receiver-node">
              <div class="node-icon">üñ•Ô∏è</div>
              <div class="node-name" style="color:#60a5fa;">Receiver</div>
              <div class="node-ip">192.168.1.20</div>
              <div class="node-ip" style="color:#4ade80; margin-top:4px;" id="recv-count">Received: 0</div>
            </div>
          </div>
        </div>

        <div class="sim-controls">
          <button class="sim-btn btn-send" onclick="sendPacket(false)">‚ñ∂ Send Packet</button>
          <button class="sim-btn btn-drop" onclick="sendPacket(true)">‚úï Send (Simulated Drop)</button>
          <button class="sim-btn btn-burst" onclick="sendBurst()">‚ö° Burst (5 packets)</button>
          <button class="sim-btn btn-reset" onclick="resetSim()">‚Ü∫ Reset</button>
          <div style="margin-left:auto; font-family:var(--mono); font-size:11px; color:#475569;">No ACK ¬∑ No Retransmission</div>
        </div>

        <div class="sim-stats">
          <div class="stat-pill"><span id="stat-sent" style="color:#4ade80;">0</span>Sent</div>
          <div class="stat-pill"><span id="stat-recv" style="color:#60a5fa;">0</span>Received</div>
          <div class="stat-pill"><span id="stat-drop" style="color:#f87171;">0</span>Dropped</div>
          <div class="stat-pill"><span id="stat-rate" style="color:#fbbf24;">‚Äî</span>Loss Rate</div>
        </div>

        <div class="sim-log" id="sim-log">
          <div><span class="log-time">00:00:00</span><span class="log-info">Simulation ready. Click "Send Packet" to begin.</span></div>
        </div>
      </div>

      <!-- ===== TAB 2: Segment Builder ===== -->
      <div class="sim-panel" id="tab-seg">
        <p style="font-size:13px; color:#64748b; margin-bottom:16px;">Fill in the fields below to build a UDP segment in real time. Watch how the header values are packed into the 8-byte header.</p>
        <div class="seg-builder">
          <div class="sb-form">
            <div class="sb-field">
              <label>Source Port</label>
              <input type="number" id="sb-src" value="52341" min="0" max="65535" oninput="updateSegment()">
            </div>
            <div class="sb-field">
              <label>Destination Port</label>
              <input type="number" id="sb-dst" value="53" min="0" max="65535" oninput="updateSegment()">
            </div>
            <div class="sb-field sb-full">
              <label>Payload (Data)</label>
              <textarea id="sb-data" rows="2" oninput="updateSegment()">Hello, UDP!</textarea>
            </div>
          </div>

          <div class="sb-segment-vis">
            <div class="sb-seg-row">
              <div class="sb-seg-cell" style="background:rgba(232,69,69,0.12);">
                <div class="sc-label">Source Port</div>
                <div class="sc-val" id="vis-src" style="color:#f87171;">52341</div>
              </div>
              <div class="sb-seg-cell" style="background:rgba(245,158,11,0.12);">
                <div class="sc-label">Destination Port</div>
                <div class="sc-val" id="vis-dst" style="color:#fbbf24;">53</div>
              </div>
            </div>
            <div class="sb-seg-row">
              <div class="sb-seg-cell" style="background:rgba(37,99,235,0.12);">
                <div class="sc-label">Length (bytes)</div>
                <div class="sc-val" id="vis-len" style="color:#60a5fa;">19</div>
              </div>
              <div class="sb-seg-cell" style="background:rgba(22,163,74,0.12);">
                <div class="sc-label">Checksum</div>
                <div class="sc-val" id="vis-chk" style="color:#4ade80;">0x0000</div>
              </div>
            </div>
            <div class="sb-seg-row">
              <div class="sb-data-cell">
                <div class="sc-label">Payload Data</div>
                <div id="vis-data" style="margin-top:4px;">Hello, UDP!</div>
              </div>
            </div>
          </div>

          <div style="margin-top:16px; background:#060d1a; border:1px solid #1e2d45; border-radius:10px; padding:14px 16px; font-family:var(--mono); font-size:12px; color:#475569;">
            <div style="margin-bottom:6px; font-size:10px; letter-spacing:2px; text-transform:uppercase; color:#334155;">Header Hex Dump</div>
            <div id="vis-hex" style="letter-spacing:2px; color:#64748b; word-break:break-all;"></div>
          </div>
        </div>
      </div>

      <!-- ===== TAB 3: Checksum Calculator ===== -->
      <div class="sim-panel" id="tab-chk">
        <p style="font-size:13px; color:#64748b; margin-bottom:16px;">Enter up to 4 sixteen-bit words (in decimal or hex, e.g. <code style="color:#94a3b8;">0x6660</code>) to compute the UDP checksum using 1's complement arithmetic. Then verify a received segment.</p>

        <div class="chk-sim">
          <div class="chk-input-row">
            <div class="chk-field">
              <label>Word 1 (hex)</label>
              <input type="text" id="chk-w1" value="0x6660" oninput="calcChecksum()">
            </div>
            <div class="chk-field">
              <label>Word 2 (hex)</label>
              <input type="text" id="chk-w2" value="0x5555" oninput="calcChecksum()">
            </div>
            <div class="chk-field">
              <label>Word 3 (hex)</label>
              <input type="text" id="chk-w3" value="0xF0F0" oninput="calcChecksum()">
            </div>
            <div class="chk-field">
              <label>Word 4 (hex)</label>
              <input type="text" id="chk-w4" value="0x0000" oninput="calcChecksum()">
            </div>
          </div>

          <div class="chk-result-area" id="chk-result">
            <!-- populated by JS -->
          </div>

          <div style="margin-top:18px; padding:14px 16px; background:#060d1a; border:1px solid #1e2d45; border-radius:10px;">
            <div style="font-family:var(--mono); font-size:11px; letter-spacing:2px; text-transform:uppercase; color:#334155; margin-bottom:10px;">Receiver Verification</div>
            <p style="color:#64748b; font-size:12px; margin:0 0 10px;">When the receiver adds all words <strong style="color:#94a3b8;">including the checksum</strong>, the result should be 0xFFFF (all ones = no error).</p>
            <div id="chk-verify" style="font-family:var(--mono); font-size:14px;"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

</div>

<footer>
  <div class="container">
    UDP ‚Äî User Datagram Protocol &nbsp;¬∑&nbsp; Transport Layer &nbsp;¬∑&nbsp; Computer Networks
  </div>
</footer>


<script>
  // ===== TAB SWITCHING =====
  function switchTab(name) {
    document.querySelectorAll('.sim-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.sim-panel').forEach(p => p.classList.remove('active'));
    document.getElementById('tab-' + name).classList.add('active');
    event.target.classList.add('active');
  }

  // ===== PACKET SIMULATION =====
  let sentCount = 0, recvCount = 0, dropCount = 0;
  let pktId = 0;
  const colors = ['#e84545','#f59e0b','#2563eb','#16a34a','#a855f7','#06b6d4'];

  function getTime() {
    const n = new Date();
    return n.toTimeString().slice(0,8);
  }

  function addLog(msg, cls) {
    const log = document.getElementById('sim-log');
    const div = document.createElement('div');
    div.innerHTML = '<span class="log-time">' + getTime() + '</span><span class="' + cls + '">' + msg + '</span>';
    log.appendChild(div);
    log.scrollTop = log.scrollHeight;
  }

  function updateStats() {
    document.getElementById('stat-sent').textContent = sentCount;
    document.getElementById('stat-recv').textContent = recvCount;
    document.getElementById('stat-drop').textContent = dropCount;
    document.getElementById('sent-count').textContent = 'Sent: ' + sentCount;
    document.getElementById('recv-count').textContent = 'Received: ' + recvCount;
    const rate = sentCount > 0 ? Math.round((dropCount / sentCount) * 100) + '%' : '‚Äî';
    document.getElementById('stat-rate').textContent = rate;
  }

  function sendPacket(forceDrop) {
    pktId++;
    sentCount++;
    const id = pktId;
    const color = colors[(id - 1) % colors.length];
    const port = Math.floor(Math.random() * 1000) + 49000;

    const channel = document.getElementById('sim-channel');
    const line = document.getElementById('channel-line');

    // Remove old packets
    channel.querySelectorAll('.sim-packet').forEach(p => p.remove());

    const pkt = document.createElement('div');
    pkt.className = 'sim-packet';
    pkt.style.background = color + '22';
    pkt.style.border = '1.5px solid ' + color;
    pkt.style.color = color;
    pkt.textContent = 'PKT#' + id;

    const willDrop = forceDrop || (Math.random() < 0.0); // manual drop only unless forced
    pkt.classList.add(willDrop ? 'dropped' : 'traveling');

    line.appendChild(pkt);

    if (willDrop) {
      dropCount++;
      addLog('‚úï Packet #' + id + ' DROPPED in transit (port ' + port + ' ‚Üí :53). No retransmission.', 'log-drop');
    } else {
      recvCount++;
      addLog('‚ñ∂ Packet #' + id + ' sent (src port ' + port + ' ‚Üí dst :53, ' + (8 + Math.floor(Math.random()*200)+20) + ' bytes)', 'log-sent');
      setTimeout(() => {
        addLog('‚úì Packet #' + id + ' received successfully.', 'log-recv');
        updateStats();
      }, 1900);
    }

    updateStats();

    setTimeout(() => {
      if (pkt.parentNode) pkt.remove();
    }, 2200);
  }

  function sendBurst() {
    const ports = [52001, 52002, 52003, 52004, 52005];
    const dropIdx = Math.floor(Math.random() * 5); // randomly drop one
    addLog('‚ö° Burst: sending 5 packets rapidly...', 'log-info');

    ports.forEach((p, i) => {
      setTimeout(() => sendPacketBurst(i, i === dropIdx, p), i * 380);
    });
  }

  function sendPacketBurst(i, drop, port) {
    pktId++;
    sentCount++;
    const id = pktId;
    const color = colors[(id - 1) % colors.length];

    const channel = document.getElementById('sim-channel');
    const line = document.getElementById('channel-line');

    const pkt = document.createElement('div');
    pkt.className = 'sim-packet';
    pkt.style.background = color + '22';
    pkt.style.border = '1.5px solid ' + color;
    pkt.style.color = color;
    pkt.style.top = (30 + (i * 0)) + '%';
    pkt.textContent = '#' + id;
    pkt.classList.add(drop ? 'dropped' : 'traveling');
    line.appendChild(pkt);

    if (drop) {
      dropCount++;
      addLog('‚úï Packet #' + id + ' DROPPED (no retransmit ‚Äî this is UDP!)', 'log-drop');
    } else {
      recvCount++;
      setTimeout(() => {
        addLog('‚úì Packet #' + id + ' delivered.', 'log-recv');
        updateStats();
      }, 1900);
    }

    updateStats();
    setTimeout(() => { if (pkt.parentNode) pkt.remove(); }, 2200);
  }

  function resetSim() {
    sentCount = 0; recvCount = 0; dropCount = 0; pktId = 0;
    updateStats();
    document.getElementById('sim-log').innerHTML = '<div><span class="log-time">00:00:00</span><span class="log-info">Simulation reset.</span></div>';
    document.querySelectorAll('.sim-packet').forEach(p => p.remove());
  }

  // ===== SEGMENT BUILDER =====
  function toBin16(n) {
    return n.toString(2).padStart(16, '0').replace(/(\d{4})/g, '$1 ').trim();
  }
  function toHex16(n) {
    return '0x' + n.toString(16).toUpperCase().padStart(4, '0');
  }
  function simpleChecksum(src, dst, len) {
    let sum = src + dst + len;
    while (sum > 0xFFFF) sum = (sum & 0xFFFF) + (sum >> 16);
    return (~sum) & 0xFFFF;
  }

  function updateSegment() {
    const src = parseInt(document.getElementById('sb-src').value) || 0;
    const dst = parseInt(document.getElementById('sb-dst').value) || 0;
    const data = document.getElementById('sb-data').value || '';
    const dataLen = new TextEncoder().encode(data).length;
    const totalLen = 8 + dataLen;
    const chk = simpleChecksum(src, dst, totalLen);

    document.getElementById('vis-src').textContent = src;
    document.getElementById('vis-dst').textContent = dst;
    document.getElementById('vis-len').textContent = totalLen;
    document.getElementById('vis-chk').textContent = toHex16(chk);
    document.getElementById('vis-data').textContent = data || '(empty)';

    // Hex dump of header
    const fields = [src, dst, totalLen, chk];
    const hex = fields.map(v => {
      const h = v.toString(16).toUpperCase().padStart(4,'0');
      return h.slice(0,2) + ' ' + h.slice(2);
    }).join('  ');
    document.getElementById('vis-hex').textContent = hex + '  [' + dataLen + ' bytes data]';
  }

  // ===== CHECKSUM CALCULATOR =====
  function parseHexOrDec(s) {
    s = s.trim();
    if (s.startsWith('0x') || s.startsWith('0X')) return parseInt(s, 16);
    return parseInt(s, 10);
  }

  function toBin16Spaced(n) {
    const b = (n & 0xFFFF).toString(2).padStart(16,'0');
    return b.slice(0,4)+' '+b.slice(4,8)+' '+b.slice(8,12)+' '+b.slice(12,16);
  }

  function calcChecksum() {
    const ids = ['chk-w1','chk-w2','chk-w3','chk-w4'];
    const words = ids.map(id => {
      const v = parseHexOrDec(document.getElementById(id).value);
      return isNaN(v) ? 0 : (v & 0xFFFF);
    }).filter((v, i) => {
      const raw = document.getElementById(ids[i]).value.trim();
      return raw !== '' && raw !== '0x0000' || i < 2;
    });

    // Recompute with all 4 words (treat 0x0000 as skip only if empty)
    const allWords = ids.map(id => {
      const raw = document.getElementById(id).value.trim();
      if (!raw) return null;
      const v = parseHexOrDec(raw);
      return isNaN(v) ? null : (v & 0xFFFF);
    }).filter(v => v !== null);

    let html = '';
    let sum = 0;
    allWords.forEach((w, i) => {
      html += '<div class="chk-step-row">';
      html += '<span class="chk-step-label">Word ' + (i+1) + '</span>';
      html += '<span class="chk-step-bin">' + toBin16Spaced(w) + '</span>';
      html += '<span class="chk-step-hex">' + '0x' + w.toString(16).toUpperCase().padStart(4,'0') + '</span>';
      html += '</div>';

      const prev = sum;
      sum += w;
      if (sum > 0xFFFF) {
        const carry = sum >> 16;
        sum = (sum & 0xFFFF) + carry;
        html += '<div class="chk-step-row" style="opacity:0.6;">';
        html += '<span class="chk-step-label">+carry wrap</span>';
        html += '<span class="chk-step-bin" style="color:#f59e0b;">Carry ' + carry + ' added back ‚Üí ' + toBin16Spaced(sum) + '</span>';
        html += '<span class="chk-step-hex" style="color:#f59e0b;">0x' + sum.toString(16).toUpperCase().padStart(4,'0') + '</span>';
        html += '</div>';
      }
    });

    html += '<div class="chk-step-row" style="padding-top:10px; margin-top:6px; border-top:1px solid #1e2d45;">';
    html += '<span class="chk-step-label">Sum</span>';
    html += '<span class="chk-step-bin">' + toBin16Spaced(sum) + '</span>';
    html += '<span class="chk-step-hex">0x' + sum.toString(16).toUpperCase().padStart(4,'0') + '</span>';
    html += '</div>';

    const complement = (~sum) & 0xFFFF;
    html += '<div class="chk-step-row">';
    html += '<span class="chk-step-label">1s Complement</span>';
    html += '<span class="chk-step-bin chk-final">' + toBin16Spaced(complement) + '</span>';
    html += '<span class="chk-step-hex chk-final">0x' + complement.toString(16).toUpperCase().padStart(4,'0') + '</span>';
    html += '</div>';

    document.getElementById('chk-result').innerHTML = html;

    // Verification
    const verifySum = (sum + complement) & 0xFFFF;
    const carry2 = ((sum + complement) >> 16);
    const finalVerify = verifySum + carry2;
    const ok = (finalVerify & 0xFFFF) === 0xFFFF;
    document.getElementById('chk-verify').innerHTML =
      '<span class="' + (ok ? 'chk-verify-ok' : 'chk-verify-fail') + '">' +
      (ok ? '‚úÖ Sum + Checksum = 1111 1111 1111 1111 (0xFFFF) ‚Äî No error detected!'
          : '‚ùå Result ‚â† 0xFFFF ‚Äî Error detected!') +
      '</span>';
  }

  // Init
  updateSegment();
  calcChecksum();
  updateStats();
</script>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); }
    });
  }, { threshold: 0.08 });
  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>

</body>
</html>
