<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TCP vs UDP ‚Äî Network Protocol Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0e1a;
    --surface: #111827;
    --surface2: #1a2236;
    --tcp: #00e5ff;
    --tcp-dark: #0098aa;
    --udp: #ff6b35;
    --udp-dark: #c94e1e;
    --text: #e8eaf0;
    --muted: #7a8299;
    --success: #00ff9d;
    --error: #ff4466;
    --border: #1e2d42;
    --packet-size: 32px;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Space Mono', monospace;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ‚îÄ‚îÄ Grid background ‚îÄ‚îÄ */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(0,229,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,229,255,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
  header {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 60px 20px 40px;
  }

  .badge {
    display: inline-block;
    background: rgba(0,229,255,0.1);
    border: 1px solid rgba(0,229,255,0.3);
    color: var(--tcp);
    font-size: 11px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    padding: 6px 16px;
    border-radius: 100px;
    margin-bottom: 24px;
  }

  h1 {
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: clamp(2.5rem, 6vw, 5rem);
    line-height: 1;
    letter-spacing: -0.02em;
  }

  h1 span.tcp-color { color: var(--tcp); }
  h1 span.vs { color: var(--muted); font-size: 0.6em; vertical-align: middle; margin: 0 12px; }
  h1 span.udp-color { color: var(--udp); }

  .subtitle {
    color: var(--muted);
    font-size: 13px;
    margin-top: 16px;
    letter-spacing: 0.05em;
  }

  /* ‚îÄ‚îÄ Main Layout ‚îÄ‚îÄ */
  main {
    position: relative;
    z-index: 1;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px 80px;
  }

  /* ‚îÄ‚îÄ Section title ‚îÄ‚îÄ */
  .section-title {
    font-family: 'Syne', sans-serif;
    font-size: 11px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .section-title::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  /* ‚îÄ‚îÄ Theory Cards ‚îÄ‚îÄ */
  .theory-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 48px;
  }

  @media (max-width: 700px) { .theory-grid { grid-template-columns: 1fr; } }

  .theory-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 28px;
    position: relative;
    overflow: hidden;
  }

  .theory-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
  }

  .theory-card.tcp::before { background: linear-gradient(90deg, var(--tcp), transparent); }
  .theory-card.udp::before { background: linear-gradient(90deg, var(--udp), transparent); }

  .card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
  }

  .protocol-icon {
    width: 42px; height: 42px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: 13px;
    letter-spacing: 0.05em;
  }

  .tcp-icon { background: rgba(0,229,255,0.15); color: var(--tcp); border: 1px solid rgba(0,229,255,0.3); }
  .udp-icon { background: rgba(255,107,53,0.15); color: var(--udp); border: 1px solid rgba(255,107,53,0.3); }

  .card-title {
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 18px;
  }

  .card-full-name {
    font-size: 10px;
    color: var(--muted);
    letter-spacing: 0.1em;
    margin-top: 2px;
  }

  .trait-list {
    list-style: none;
  }

  .trait-list li {
    font-size: 12px;
    color: var(--muted);
    padding: 8px 0;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: flex-start;
    gap: 10px;
    line-height: 1.6;
  }

  .trait-list li:last-child { border-bottom: none; }

  .trait-list li .dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    margin-top: 6px;
    flex-shrink: 0;
  }

  .tcp .dot { background: var(--tcp); }
  .udp .dot { background: var(--udp); }

  .use-cases {
    margin-top: 20px;
    padding: 14px;
    border-radius: 8px;
    font-size: 11px;
    letter-spacing: 0.05em;
  }

  .tcp .use-cases { background: rgba(0,229,255,0.06); border: 1px solid rgba(0,229,255,0.15); }
  .udp .use-cases { background: rgba(255,107,53,0.06); border: 1px solid rgba(255,107,53,0.15); }

  .use-cases-label {
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 8px;
  }

  .tcp .use-cases-label { color: var(--tcp); }
  .udp .use-cases-label { color: var(--udp); }

  .use-cases-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  .tag {
    padding: 3px 10px;
    border-radius: 100px;
    font-size: 10px;
    letter-spacing: 0.1em;
  }

  .tcp .tag { background: rgba(0,229,255,0.1); color: var(--tcp); }
  .udp .tag { background: rgba(255,107,53,0.1); color: var(--udp); }

  /* ‚îÄ‚îÄ Demo Area ‚îÄ‚îÄ */
  .demo-panel {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 48px;
  }

  .demo-toolbar {
    background: var(--surface2);
    border-bottom: 1px solid var(--border);
    padding: 14px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 12px;
  }

  .demo-title {
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 0.05em;
  }

  .controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: center;
  }

  .btn {
    padding: 8px 18px;
    border-radius: 6px;
    border: none;
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.1em;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: uppercase;
  }

  .btn-tcp {
    background: rgba(0,229,255,0.15);
    color: var(--tcp);
    border: 1px solid rgba(0,229,255,0.3);
  }
  .btn-tcp:hover { background: rgba(0,229,255,0.25); transform: translateY(-1px); }

  .btn-udp {
    background: rgba(255,107,53,0.15);
    color: var(--udp);
    border: 1px solid rgba(255,107,53,0.3);
  }
  .btn-udp:hover { background: rgba(255,107,53,0.25); transform: translateY(-1px); }

  .btn-reset {
    background: transparent;
    color: var(--muted);
    border: 1px solid var(--border);
  }
  .btn-reset:hover { color: var(--text); border-color: var(--muted); }

  .loss-control {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 11px;
    color: var(--muted);
  }

  .loss-control input[type="range"] {
    accent-color: var(--udp);
    width: 80px;
  }

  .loss-val { color: var(--udp); font-weight: bold; min-width: 30px; }

  /* ‚îÄ‚îÄ Network Canvas ‚îÄ‚îÄ */
  .network-canvas {
    padding: 32px 24px;
    position: relative;
    min-height: 240px;
  }

  .nodes-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
  }

  .node {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    z-index: 2;
  }

  .node-box {
    width: 80px; height: 60px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    position: relative;
  }

  .node-sender .node-box { background: rgba(0,229,255,0.1); border: 1px solid rgba(0,229,255,0.3); }
  .node-receiver .node-box { background: rgba(0,229,255,0.1); border: 1px solid rgba(0,229,255,0.3); }

  .node-label {
    font-size: 10px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
  }

  .channel {
    position: absolute;
    left: 100px;
    right: 100px;
    top: 50%;
    transform: translateY(-50%);
    height: 2px;
    background: var(--border);
  }

  .channel-label {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 10px;
    color: var(--muted);
    letter-spacing: 0.1em;
    white-space: nowrap;
  }

  /* ‚îÄ‚îÄ Packet animation ‚îÄ‚îÄ */
  .packet {
    position: absolute;
    width: var(--packet-size);
    height: var(--packet-size);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    transition: left 0.6s ease, opacity 0.3s;
    font-family: 'Syne', sans-serif;
  }

  .packet.tcp-pkt {
    background: rgba(0,229,255,0.2);
    border: 1px solid var(--tcp);
    color: var(--tcp);
    box-shadow: 0 0 8px rgba(0,229,255,0.3);
  }

  .packet.udp-pkt {
    background: rgba(255,107,53,0.2);
    border: 1px solid var(--udp);
    color: var(--udp);
    box-shadow: 0 0 8px rgba(255,107,53,0.3);
  }

  .packet.ack-pkt {
    background: rgba(0,255,157,0.15);
    border: 1px solid var(--success);
    color: var(--success);
    box-shadow: 0 0 8px rgba(0,255,157,0.3);
    font-size: 10px;
  }

  .packet.dropped {
    opacity: 0;
    transform: translateY(30px);
  }

  /* ‚îÄ‚îÄ Log ‚îÄ‚îÄ */
  .log-panel {
    border-top: 1px solid var(--border);
    padding: 20px 24px;
    max-height: 220px;
    overflow-y: auto;
  }

  .log-panel::-webkit-scrollbar { width: 4px; }
  .log-panel::-webkit-scrollbar-track { background: transparent; }
  .log-panel::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

  .log-entry {
    font-size: 11px;
    padding: 4px 0;
    display: flex;
    gap: 12px;
    align-items: flex-start;
    line-height: 1.6;
    border-bottom: 1px solid rgba(255,255,255,0.03);
  }

  .log-time { color: var(--muted); flex-shrink: 0; width: 70px; }
  .log-type { flex-shrink: 0; width: 50px; font-weight: bold; }
  .log-type.tcp { color: var(--tcp); }
  .log-type.udp { color: var(--udp); }
  .log-type.ack { color: var(--success); }
  .log-type.drop { color: var(--error); }
  .log-type.sys { color: var(--muted); }
  .log-msg { color: var(--text); }

  .log-empty {
    color: var(--muted);
    font-size: 11px;
    text-align: center;
    padding: 20px 0;
    letter-spacing: 0.1em;
  }

  /* ‚îÄ‚îÄ Handshake Diagram ‚îÄ‚îÄ */
  .handshake-panel {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 48px;
  }

  .handshake-diagram {
    padding: 32px;
    position: relative;
  }

  .hs-timeline {
    display: flex;
    justify-content: space-between;
    position: relative;
  }

  .hs-side {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 120px;
    flex-shrink: 0;
  }

  .hs-node {
    width: 64px; height: 48px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    background: rgba(0,229,255,0.1);
    border: 1px solid rgba(0,229,255,0.3);
    margin-bottom: 8px;
  }

  .hs-node-label {
    font-size: 10px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 16px;
  }

  .hs-line {
    width: 2px;
    background: rgba(0,229,255,0.2);
    flex: 1;
    min-height: 200px;
    position: relative;
  }

  .hs-middle {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0;
    padding-top: 80px;
  }

  .hs-arrow {
    display: flex;
    align-items: center;
    margin-bottom: 28px;
    position: relative;
    opacity: 0;
    transform: translateX(-20px);
    transition: all 0.5s ease;
  }

  .hs-arrow.right { flex-direction: row; }
  .hs-arrow.left { flex-direction: row-reverse; }

  .hs-arrow.visible { opacity: 1; transform: translateX(0); }

  .hs-arrow-line {
    flex: 1;
    height: 2px;
    position: relative;
  }

  .hs-arrow.right .hs-arrow-line { background: linear-gradient(90deg, transparent, var(--tcp)); }
  .hs-arrow.left .hs-arrow-line { background: linear-gradient(90deg, var(--tcp), transparent); }

  .hs-arrow-label {
    position: absolute;
    top: -18px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 11px;
    white-space: nowrap;
    color: var(--tcp);
    letter-spacing: 0.05em;
    background: var(--surface);
    padding: 0 6px;
  }

  .hs-arrowhead {
    width: 0; height: 0;
    border-style: solid;
  }

  .hs-arrow.right .hs-arrowhead {
    border-width: 5px 0 5px 8px;
    border-color: transparent transparent transparent var(--tcp);
  }

  .hs-arrow.left .hs-arrowhead {
    border-width: 5px 8px 5px 0;
    border-color: transparent var(--tcp) transparent transparent;
  }

  .hs-arrow-desc {
    font-size: 10px;
    color: var(--muted);
    margin-top: 4px;
    letter-spacing: 0.05em;
  }

  /* SYN color override */
  .hs-arrow.syn .hs-arrow-line { background: linear-gradient(90deg, transparent, #ff9800); }
  .hs-arrow.syn .hs-arrow-label { color: #ff9800; }
  .hs-arrow.syn .hs-arrowhead { border-color: transparent transparent transparent #ff9800; }

  .hs-arrow.syn-ack .hs-arrow-line { background: linear-gradient(90deg, #a78bfa, transparent); }
  .hs-arrow.syn-ack .hs-arrow-label { color: #a78bfa; }
  .hs-arrow.syn-ack .hs-arrowhead { border-color: transparent #a78bfa transparent transparent; }

  .hs-arrow.fin .hs-arrow-line { background: linear-gradient(90deg, transparent, var(--error)); }
  .hs-arrow.fin .hs-arrow-label { color: var(--error); }
  .hs-arrow.fin .hs-arrowhead { border-color: transparent transparent transparent var(--error); }

  .hs-arrow.fin-left .hs-arrow-line { background: linear-gradient(90deg, var(--error), transparent); }
  .hs-arrow.fin-left .hs-arrow-label { color: var(--error); }
  .hs-arrow.fin-left .hs-arrowhead { border-color: transparent var(--error) transparent transparent; }

  .hs-btn {
    display: block;
    margin: 20px auto 0;
    padding: 10px 28px;
  }

  /* ‚îÄ‚îÄ Comparison Table ‚îÄ‚îÄ */
  .compare-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 48px;
    font-size: 12px;
  }

  .compare-table th, .compare-table td {
    padding: 14px 18px;
    text-align: left;
    border-bottom: 1px solid var(--border);
  }

  .compare-table thead th {
    font-family: 'Syne', sans-serif;
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
  }

  .compare-table thead th:nth-child(2) { color: var(--tcp); }
  .compare-table thead th:nth-child(3) { color: var(--udp); }
  .compare-table thead th:nth-child(1) { color: var(--muted); }

  .compare-table tbody tr:hover td { background: rgba(255,255,255,0.02); }

  .compare-table .feature { color: var(--muted); font-size: 11px; letter-spacing: 0.05em; }
  .compare-table .tcp-val { color: var(--tcp); }
  .compare-table .udp-val { color: var(--udp); }

  /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
  footer {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 32px;
    border-top: 1px solid var(--border);
    font-size: 11px;
    color: var(--muted);
    letter-spacing: 0.1em;
  }

  /* ‚îÄ‚îÄ Stats row ‚îÄ‚îÄ */
  .stats-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 12px;
    padding: 0 24px 24px;
  }

  .stat-box {
    background: var(--surface2);
    border-radius: 8px;
    padding: 14px;
    text-align: center;
    border: 1px solid var(--border);
  }

  .stat-val {
    font-family: 'Syne', sans-serif;
    font-size: 24px;
    font-weight: 800;
  }

  .stat-val.tcp { color: var(--tcp); }
  .stat-val.udp { color: var(--udp); }
  .stat-val.neutral { color: var(--text); }

  .stat-label {
    font-size: 10px;
    color: var(--muted);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-top: 4px;
  }

  /* ‚îÄ‚îÄ Pulse ‚îÄ‚îÄ */
  @keyframes pulse-tcp {
    0%, 100% { box-shadow: 0 0 0 0 rgba(0,229,255,0.4); }
    50% { box-shadow: 0 0 0 8px rgba(0,229,255,0); }
  }

  @keyframes pulse-udp {
    0%, 100% { box-shadow: 0 0 0 0 rgba(255,107,53,0.4); }
    50% { box-shadow: 0 0 0 8px rgba(255,107,53,0); }
  }

  .animating .node-sender .node-box { animation: pulse-tcp 1s infinite; }
</style>
</head>
<body>

<header>
  <div class="badge">INTERACTIVE DEMO</div>
  <h1>
    <span class="tcp-color">TCP</span>
    <span class="vs">vs</span>
    <span class="udp-color">UDP</span>
  </h1>
  <p class="subtitle">// network protocol visualization &amp; simulation</p>
</header>

<main>

  <!-- ‚ïê‚ïê Theory Cards ‚ïê‚ïê -->
  <div class="section-title">Protocol Overview</div>
  <div class="theory-grid">
    <div class="theory-card tcp">
      <div class="card-header">
        <div class="protocol-icon tcp-icon">TCP</div>
        <div>
          <div class="card-title" style="color:var(--tcp)">TCP</div>
          <div class="card-full-name">TRANSMISSION CONTROL PROTOCOL</div>
        </div>
      </div>
      <ul class="trait-list tcp">
        <li><span class="dot"></span>Connection-oriented ‚Äî requires 3-way handshake before data transfer</li>
        <li><span class="dot"></span>Guaranteed delivery ‚Äî lost packets are retransmitted automatically</li>
        <li><span class="dot"></span>Ordered delivery ‚Äî packets arrive in the correct sequence</li>
        <li><span class="dot"></span>Flow control &amp; congestion control built-in</li>
        <li><span class="dot"></span>Error checking with acknowledgements (ACKs)</li>
        <li><span class="dot"></span>Higher overhead ‚Äî slower but reliable</li>
      </ul>
      <div class="use-cases">
        <div class="use-cases-label">Best Used For</div>
        <div class="use-cases-tags">
          <span class="tag">HTTP/HTTPS</span>
          <span class="tag">Email (SMTP)</span>
          <span class="tag">FTP</span>
          <span class="tag">SSH</span>
          <span class="tag">Database</span>
        </div>
      </div>
    </div>

    <div class="theory-card udp">
      <div class="card-header">
        <div class="protocol-icon udp-icon">UDP</div>
        <div>
          <div class="card-title" style="color:var(--udp)">UDP</div>
          <div class="card-full-name">USER DATAGRAM PROTOCOL</div>
        </div>
      </div>
      <ul class="trait-list udp">
        <li><span class="dot"></span>Connectionless ‚Äî sends data without establishing a connection</li>
        <li><span class="dot"></span>No delivery guarantee ‚Äî packets may be lost silently</li>
        <li><span class="dot"></span>No ordering ‚Äî packets may arrive out of sequence</li>
        <li><span class="dot"></span>No flow or congestion control</li>
        <li><span class="dot"></span>Minimal header overhead (8 bytes vs TCP's 20+)</li>
        <li><span class="dot"></span>Lower latency ‚Äî fast but unreliable</li>
      </ul>
      <div class="use-cases">
        <div class="use-cases-label">Best Used For</div>
        <div class="use-cases-tags">
          <span class="tag">DNS</span>
          <span class="tag">Video Streaming</span>
          <span class="tag">VoIP</span>
          <span class="tag">Online Gaming</span>
          <span class="tag">IoT Sensors</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê Live Demo ‚ïê‚ïê -->
  <div class="section-title">Live Packet Simulation</div>
  <div class="demo-panel" id="demoPanel">
    <div class="demo-toolbar">
      <div class="demo-title">üî¨ Packet Transmission Simulator</div>
      <div class="controls">
        <div class="loss-control">
          <span>Packet Loss:</span>
          <input type="range" id="lossSlider" min="0" max="80" value="30">
          <span class="loss-val" id="lossVal">30%</span>
        </div>
        <button class="btn btn-tcp" onclick="sendPackets('tcp')">‚ñ∂ Send TCP</button>
        <button class="btn btn-udp" onclick="sendPackets('udp')">‚ñ∂ Send UDP</button>
        <button class="btn btn-reset" onclick="resetDemo()">‚Ü∫ Reset</button>
      </div>
    </div>

    <div class="network-canvas" id="networkCanvas">
      <div class="nodes-row" id="nodesRow">
        <div class="node node-sender" id="senderNode">
          <div class="node-box">üíª</div>
          <div class="node-label">Client</div>
        </div>
        <div class="channel" id="channel">
          <div class="channel-label" id="channelLabel">NETWORK CHANNEL</div>
        </div>
        <div class="node node-receiver" id="receiverNode">
          <div class="node-box">üñ•Ô∏è</div>
          <div class="node-label">Server</div>
        </div>
      </div>
    </div>

    <div class="stats-row">
      <div class="stat-box">
        <div class="stat-val tcp" id="statSent">0</div>
        <div class="stat-label">Packets Sent</div>
      </div>
      <div class="stat-box">
        <div class="stat-val neutral" id="statReceived">0</div>
        <div class="stat-label">Delivered</div>
      </div>
      <div class="stat-box">
        <div class="stat-val udp" id="statDropped">0</div>
        <div class="stat-label">Dropped</div>
      </div>
      <div class="stat-box">
        <div class="stat-val neutral" id="statRetrans">0</div>
        <div class="stat-label">Retransmissions</div>
      </div>
      <div class="stat-box">
        <div class="stat-val neutral" id="statMode">‚Äî</div>
        <div class="stat-label">Protocol</div>
      </div>
    </div>

    <div class="log-panel" id="logPanel">
      <div class="log-empty" id="logEmpty">// Start a simulation to see packet activity log</div>
    </div>
  </div>

  <!-- ‚ïê‚ïê TCP Handshake ‚ïê‚ïê -->
  <div class="section-title">TCP Three-Way Handshake</div>
  <div class="handshake-panel">
    <div class="demo-toolbar">
      <div class="demo-title">ü§ù Connection Establishment (SYN ‚Üí SYN-ACK ‚Üí ACK)</div>
    </div>
    <div class="handshake-diagram">
      <div class="hs-timeline">
        <div class="hs-side">
          <div class="hs-node">üíª</div>
          <div class="hs-node-label">Client</div>
          <div class="hs-line"></div>
        </div>

        <div class="hs-middle" id="hsDiagram">
          <!-- Step 1: SYN -->
          <div class="hs-arrow right syn" id="hs1">
            <div class="hs-arrow-line">
              <span class="hs-arrow-label">SYN ‚Äî seq=100</span>
            </div>
            <div class="hs-arrowhead"></div>
          </div>

          <!-- Step 2: SYN-ACK -->
          <div class="hs-arrow left syn-ack" id="hs2">
            <div class="hs-arrow-line">
              <span class="hs-arrow-label">SYN-ACK ‚Äî seq=200, ack=101</span>
            </div>
            <div class="hs-arrowhead"></div>
          </div>

          <!-- Step 3: ACK -->
          <div class="hs-arrow right" id="hs3">
            <div class="hs-arrow-line">
              <span class="hs-arrow-label">ACK ‚Äî ack=201</span>
            </div>
            <div class="hs-arrowhead"></div>
          </div>

          <!-- Step 4: DATA -->
          <div class="hs-arrow right" id="hs4" style="opacity:0;transform:translateX(-20px)">
            <div class="hs-arrow-line" style="background:linear-gradient(90deg, transparent, var(--success))">
              <span class="hs-arrow-label" style="color:var(--success)">DATA ‚Äî Application Payload</span>
            </div>
            <div class="hs-arrowhead" style="border-color: transparent transparent transparent var(--success)"></div>
          </div>

          <!-- Step 5: FIN -->
          <div class="hs-arrow right fin" id="hs5" style="opacity:0;transform:translateX(-20px)">
            <div class="hs-arrow-line">
              <span class="hs-arrow-label">FIN ‚Äî Connection Close</span>
            </div>
            <div class="hs-arrowhead"></div>
          </div>

          <!-- Step 6: FIN-ACK -->
          <div class="hs-arrow left fin-left" id="hs6" style="opacity:0;transform:translateX(20px)">
            <div class="hs-arrow-line">
              <span class="hs-arrow-label">FIN-ACK</span>
            </div>
            <div class="hs-arrowhead"></div>
          </div>
        </div>

        <div class="hs-side">
          <div class="hs-node">üñ•Ô∏è</div>
          <div class="hs-node-label">Server</div>
          <div class="hs-line"></div>
        </div>
      </div>
      <button class="btn btn-tcp hs-btn" onclick="animateHandshake()">‚ñ∂ Animate Handshake</button>
    </div>
  </div>

  <!-- ‚ïê‚ïê Comparison Table ‚ïê‚ïê -->
  <div class="section-title">Side-by-Side Comparison</div>
  <table class="compare-table">
    <thead>
      <tr>
        <th>Feature</th>
        <th>üîµ TCP</th>
        <th>üü† UDP</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="feature">Connection Model</td>
        <td class="tcp-val">Connection-oriented</td>
        <td class="udp-val">Connectionless</td>
      </tr>
      <tr>
        <td class="feature">Reliability</td>
        <td class="tcp-val">Guaranteed delivery</td>
        <td class="udp-val">Best-effort, no guarantee</td>
      </tr>
      <tr>
        <td class="feature">Ordering</td>
        <td class="tcp-val">Ordered (sequence numbers)</td>
        <td class="udp-val">Unordered / may arrive OOO</td>
      </tr>
      <tr>
        <td class="feature">Speed</td>
        <td class="tcp-val">Slower (overhead)</td>
        <td class="udp-val">Faster (minimal overhead)</td>
      </tr>
      <tr>
        <td class="feature">Header Size</td>
        <td class="tcp-val">20‚Äì60 bytes</td>
        <td class="udp-val">8 bytes (fixed)</td>
      </tr>
      <tr>
        <td class="feature">Flow Control</td>
        <td class="tcp-val">Yes (sliding window)</td>
        <td class="udp-val">No</td>
      </tr>
      <tr>
        <td class="feature">Error Recovery</td>
        <td class="tcp-val">ACK + retransmission</td>
        <td class="udp-val">Checksum only (no recovery)</td>
      </tr>
      <tr>
        <td class="feature">Use Case Priority</td>
        <td class="tcp-val">Accuracy over speed</td>
        <td class="udp-val">Speed over accuracy</td>
      </tr>
      <tr>
        <td class="feature">OSI Layer</td>
        <td class="tcp-val">Transport Layer (4)</td>
        <td class="udp-val">Transport Layer (4)</td>
      </tr>
    </tbody>
  </table>

</main>

<footer>
  &copy; 2026 ‚Äî TCP/UDP Interactive Demo &nbsp;|&nbsp; Network Protocols Visualization
</footer>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  PACKET SIMULATION ENGINE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let stats = { sent: 0, received: 0, dropped: 0, retrans: 0 };
let logEntries = [];
let isSimulating = false;

const lossSlider = document.getElementById('lossSlider');
const lossVal = document.getElementById('lossVal');
lossSlider.addEventListener('input', () => { lossVal.textContent = lossSlider.value + '%'; });

function getChannelBounds() {
  const canvas = document.getElementById('networkCanvas');
  const sender = document.getElementById('senderNode');
  const receiver = document.getElementById('receiverNode');
  const canvasRect = canvas.getBoundingClientRect();
  const senderRect = sender.getBoundingClientRect();
  const receiverRect = receiver.getBoundingClientRect();

  const startX = senderRect.right - canvasRect.left + 6;
  const endX = receiverRect.left - canvasRect.left - 6;
  const midY = (senderRect.top + senderRect.height / 2) - canvasRect.top;

  return { startX, endX, midY, canvasRect };
}

function createPacket(type, label, color) {
  const pkt = document.createElement('div');
  pkt.className = `packet ${type}`;
  pkt.textContent = label;
  const bounds = getChannelBounds();
  pkt.style.left = bounds.startX + 'px';
  pkt.style.top = bounds.midY - 16 + 'px';
  document.getElementById('networkCanvas').appendChild(pkt);
  return pkt;
}

async function animatePacket(pkt, fromX, toX, duration = 700) {
  return new Promise(resolve => {
    pkt.style.left = fromX + 'px';
    pkt.style.transition = `left ${duration}ms ease`;
    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        pkt.style.left = toX + 'px';
        setTimeout(resolve, duration + 50);
      });
    });
  });
}

function addLog(type, msg) {
  const now = new Date();
  const time = `${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}:${now.getSeconds().toString().padStart(2,'0')}.${now.getMilliseconds().toString().padStart(3,'0')}`;
  logEntries.push({ time, type, msg });
  renderLog();
}

function renderLog() {
  const panel = document.getElementById('logPanel');
  const empty = document.getElementById('logEmpty');
  if (logEntries.length > 0) empty.style.display = 'none';

  const existing = panel.querySelectorAll('.log-entry');
  const existingCount = existing.length;
  const newEntries = logEntries.slice(existingCount);

  newEntries.forEach(e => {
    const div = document.createElement('div');
    div.className = 'log-entry';
    div.innerHTML = `<span class="log-time">${e.time}</span><span class="log-type ${e.type}">[${e.type.toUpperCase()}]</span><span class="log-msg">${e.msg}</span>`;
    panel.appendChild(div);
  });

  panel.scrollTop = panel.scrollHeight;
}

function updateStats() {
  document.getElementById('statSent').textContent = stats.sent;
  document.getElementById('statReceived').textContent = stats.received;
  document.getElementById('statDropped').textContent = stats.dropped;
  document.getElementById('statRetrans').textContent = stats.retrans;
}

function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

async function sendPackets(protocol) {
  if (isSimulating) return;
  isSimulating = true;
  document.getElementById('demoPanel').classList.add('animating');

  const lossRate = parseInt(lossSlider.value) / 100;
  const numPackets = 5;
  const modeEl = document.getElementById('statMode');
  modeEl.textContent = protocol.toUpperCase();
  modeEl.className = `stat-val ${protocol}`;

  addLog('sys', `--- Starting ${protocol.toUpperCase()} simulation | ${(lossRate*100).toFixed(0)}% packet loss ---`);

  if (protocol === 'tcp') {
    addLog('sys', 'Initiating TCP 3-way handshake...');
    await sleep(300);
    addLog('tcp', 'SYN ‚Üí Server (seq=1000)');
    await sleep(400);
    addLog('tcp', '‚Üê SYN-ACK (seq=2000, ack=1001)');
    await sleep(400);
    addLog('ack', 'ACK ‚Üí Server (ack=2001) ‚Äî Connection Established ‚úì');
    await sleep(300);
  }

  const bounds = getChannelBounds();

  for (let i = 1; i <= numPackets; i++) {
    const willDrop = Math.random() < lossRate;
    const pktType = protocol === 'tcp' ? 'tcp-pkt' : 'udp-pkt';
    const pkt = createPacket(pktType, `P${i}`, protocol);

    stats.sent++;
    updateStats();
    addLog(protocol, `Sending packet #${i} ‚Üí Server`);
    await animatePacket(pkt, bounds.startX, bounds.endX - 32);

    if (willDrop) {
      stats.dropped++;
      pkt.style.transition = 'opacity 0.4s, transform 0.4s';
      pkt.style.opacity = '0';
      pkt.style.transform = 'translateY(30px)';
      updateStats();

      if (protocol === 'tcp') {
        addLog('drop', `Packet #${i} DROPPED ‚Äî TCP will retransmit`);
        await sleep(600);
        pkt.remove();

        // Retransmit
        const repkt = createPacket('tcp-pkt', `P${i}‚Ü∫`, protocol);
        stats.retrans++;
        updateStats();
        addLog('tcp', `Retransmitting packet #${i}...`);
        await animatePacket(repkt, bounds.startX, bounds.endX - 32);
        stats.received++;
        updateStats();
        addLog('ack', `Packet #${i} delivered (retransmit) ‚Äî ACK sent ‚Üê`);

        const ackPkt = createPacket('ack-pkt', 'ACK', 'ack');
        await animatePacket(ackPkt, bounds.endX - 32, bounds.startX, 500);
        repkt.remove();
        ackPkt.remove();

      } else {
        addLog('drop', `Packet #${i} DROPPED ‚Äî UDP discards silently (no recovery)`);
        await sleep(400);
        pkt.remove();
      }

    } else {
      stats.received++;
      updateStats();

      if (protocol === 'tcp') {
        addLog('ack', `Packet #${i} delivered ‚úì ‚Äî ACK sent ‚Üê`);
        const ackPkt = createPacket('ack-pkt', 'ACK', 'ack');
        await animatePacket(ackPkt, bounds.endX - 32, bounds.startX, 500);
        pkt.remove();
        ackPkt.remove();
      } else {
        addLog('udp', `Packet #${i} delivered (best-effort)`);
        await sleep(200);
        pkt.remove();
      }
    }

    await sleep(200);
  }

  if (protocol === 'tcp') {
    await sleep(300);
    addLog('sys', 'TCP connection teardown (FIN/ACK)...');
    await sleep(300);
    addLog('tcp', 'FIN ‚Üí Server');
    await sleep(300);
    addLog('ack', '‚Üê FIN-ACK ‚Äî Connection Closed ‚úì');
  }

  addLog('sys', `--- Simulation complete: ${stats.sent} sent, ${stats.received} delivered, ${stats.dropped} dropped ---`);
  document.getElementById('demoPanel').classList.remove('animating');
  isSimulating = false;
}

function resetDemo() {
  if (isSimulating) return;
  stats = { sent: 0, received: 0, dropped: 0, retrans: 0 };
  logEntries = [];
  updateStats();

  // Remove packets
  document.querySelectorAll('.packet').forEach(p => p.remove());

  const panel = document.getElementById('logPanel');
  panel.querySelectorAll('.log-entry').forEach(e => e.remove());
  document.getElementById('logEmpty').style.display = 'block';

  document.getElementById('statMode').textContent = '‚Äî';
  document.getElementById('statMode').className = 'stat-val neutral';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  HANDSHAKE ANIMATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let hsPlaying = false;

function animateHandshake() {
  if (hsPlaying) return;
  hsPlaying = true;

  const arrows = ['hs1', 'hs2', 'hs3', 'hs4', 'hs5', 'hs6'];

  // Reset
  arrows.forEach(id => {
    const el = document.getElementById(id);
    el.style.opacity = '0';
    el.style.transform = (el.classList.contains('left') || el.classList.contains('fin-left') || id === 'hs6') ?
      'translateX(20px)' : 'translateX(-20px)';
    el.style.transition = 'none';
  });

  setTimeout(() => {
    arrows.forEach((id, i) => {
      setTimeout(() => {
        const el = document.getElementById(id);
        el.style.transition = 'all 0.5s ease';
        el.style.opacity = '1';
        el.style.transform = 'translateX(0)';
        if (i === arrows.length - 1) {
          setTimeout(() => { hsPlaying = false; }, 600);
        }
      }, i * 600);
    });
  }, 100);
}
</script>
</body>
</html>
